je_daufinat_succession = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	immediate = {
		set_variable = {
			name = DAU_successor_not_chosen_var
		}
	}

	is_shown_when_inactive = {
		c:DAU = root
	}

	possible = {
		exists = c:DAU
		c:DAU = ROOT
		ruler = { has_variable = guigo_11 }
		NOT = {
			any_scope_character = {
				is_heir = yes
			}
		}
	}

	complete = {
		custom_tooltip = {
			text = DAU_heir_chosen
			ruler = {
				NOT = { has_variable = guigo_11 }
			}
		}
	}

	on_complete = {
		custom_tooltip = DAU_heir_appears
		if = {
			limit = {
				exists = c:DAU
				c:DAU = ROOT
				has_variable = DAU_successor_chosen_AQT
			}
			trigger_event = { id = DAU_succession_events.2 }
		}
		else_if = {
			limit = {
				exists = c:DAU
				c:DAU = ROOT
				has_variable = DAU_successor_chosen_PDN
			}
			trigger_event = { id = DAU_succession_events.3 }
		}
		else_if = {
			limit = {
				exists = c:DAU
				c:DAU = ROOT
				has_variable = DAU_successor_chosen_DAU
			}
			trigger_event = { id = DAU_succession_events.4 }
		}
	}
	
	on_weekly_pulse = {
		events = {
			DAU_succession_events.1
			DAU_succession_events.2
			DAU_succession_events.3
			DAU_succession_events.4
		}
	}
	
	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					exists = c:DAU
					c:DAU = ROOT
					ruler = { has_variable = guigo_11 }
					OR = {
						has_variable = DAU_successor_chosen_AQT
						has_variable = DAU_successor_chosen_PDN
						has_variable = DAU_successor_chosen_DAU
					}
				}
				random_list = {
					11 = { }
					1 = {
						ruler = { kill_character = yes }
					}
				}
			}
		}
	}

	invalid = {
		OR = {
			NOT = {
				exists = c:DAU
			}
			is_subject = yes
			any_scope_character = {
				is_heir = yes
				OR = {
					has_variable = DAU_heir_AQT
					has_variable = DAU_heir_PDN
					has_variable = DAU_heir_DAU
				}
			}

#			c:DAU = {
#				custom_tooltip = {
#					text = "DEBUG_NO_CHARACTER_IN_DAU_IS_VICTORIA"
#					NOT = {
#						any_scope_character = {
#							has_variable = is_victoria
#						}
#					}
#				}
#			}
		}
	}

	weight = 100

	should_be_pinned_by_default = yes
}